function textUp(e,t,n,o){var s=Math.floor(Math.random()*n.length),i="#"+Math.floor(16777215*Math.random()).toString(16),a=$("<span />").text(n[s]),r=e.pageX||e.clientX+document.body.scroolLeft,c=e.pageY||e.clientY+document.body.scrollTop;$("body").append(a),a.css({top:c,left:r,color:i,transform:"translate(-50%, -50%)",display:"block",position:"absolute",zIndex:999999999999}),a.animate({top:c-(o||200),opacity:0},t,function(){a.remove()})}!function(e,t,n){function o(){console.log("%c ---本网站不支持ie8及以下浏览器打开---","color:red"),"-1"!=e.utils.IEVersion()&&e.confirm("当前为IE浏览器,为了效果体验，不支持打开")&&e.close()}function s(){n(".banner .text").typeIt({whatToType:["Believeme!","I was prepared foreverything."],typeSpeed:100},function(){})}function i(){n("#ip").val(returnCitySN.cip),n("#address").val(returnCitySN.cname),a(g("admin"),g("password"))}function a(e,t){if(e&&t){var o={username:e,password:t};n.ajax({type:"POST",url:y+"checkAdmin",data:o,beforeSend:function(){},success:function(t){var o=JSON.parse(t);1==o.s?(h=!0,n.openMessage("success","欢迎回来！  "+e),n.getMessage()):0==o.s&&n.getMessage()},error:function(e){console.log(e),n.openMessage("error","提交失败！")}})}else n.getMessage()}function r(){var t=n(".banner img");if(length=t.length,q=1,"pc"==e.utils.getWindowInfo().userAgent)for(var o=0;o<t.length;o++)n(t[o]).attr("src",n(t[o]).attr("data-pc"));else for(var o=0;o<t.length;o++)n(t[o]).attr("src",n(t[o]).attr("data-m"));t.load(function(){length<=q?(l(),s()):q++})}function c(){n("body").css({paddingTop:n("#banner").height()})}function l(){new Swiper(".banner .swiper-container",{loop:!0,autoplay:5e3,autoplayDisableOnInteraction:!1,autoHeight:!0,paginationClickable:!0,observer:!0,observeParents:!0,onInit:function(e){c()},onBeforeResize:function(e){c()}})}function d(){var t={dom:"J_dotLine",cw:e.utils.getWindowInfo().width,ch:e.utils.getWindowInfo().height,ds:100,r:.5,cl:"#aaa",dis:100};if("m"==e.utils.getWindowInfo().userAgent){var o={ds:50};n.extend(t,o)}new Dotline(t).start()}function u(){for(var e=n("#skills .bar-box"),t=e.find("span"),o=0;o<t.length;o++)n(t[o]).siblings().find("i").css("width",n(t[o]).html())}function p(e){if(b){for(var t=0;t<M.length;t++)M[t].scrollTop=parseInt(n(M[t].name).offset().top);b=!1}for(var t=0;t<M.length;t++)e>=M[t].scrollTop-60&&n("#header ul li").eq(t).addClass("cur").siblings().removeClass("cur")}function g(t){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),o=e.location.search.substr(1).match(n);return null!=o?unescape(o[2]):null}function f(e){var t=new Date(e);return t.getFullYear()+"/"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"/"+t.getDate()+" "+t.getHours()+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())}function m(){"pc"==e.utils.getWindowInfo().userAgent&&(console.log("判定为pc端，移动端取消瀑布流加载"),w&&(w=!1,n(".myPortfolio-box ul").cascade()))}var h,v,x,b=!0,w=!0,y="https://api.hongzequan.com:8000/",M=[{name:"#banner",scrollTop:0},{name:"#aboutMe",scrollTop:0},{name:"#mySkills",scrollTop:0},{name:"#myPortfolio",scrollTop:0},{name:"#message",scrollTop:0}],T=[{name:"swws",imgUrl:["https://images.hongzequan.com/website/portfolio/swws_1.png","https://images.hongzequan.com/website/portfolio/swws_2.png","https://images.hongzequan.com/website/portfolio/swws_3.png"]},{name:"smt",imgUrl:["https://images.hongzequan.com/website/portfolio/smt_1.png","https://images.hongzequan.com/website/portfolio/smt_2.png","https://images.hongzequan.com/website/portfolio/smt_3.png"]},{name:"smtyy",imgUrl:["https://images.hongzequan.com/website/portfolio/yy_sumaotong.png","https://images.hongzequan.com/website/portfolio/yy_sumaotong_1.png","https://images.hongzequan.com/website/portfolio/yy_sumaotong_2.png"]}];e.utils={getWindowInfo:function(){return{width:e.innerWidth,height:e.innerHeight,userAgent:e.innerWidth>870?"pc":"m",ie:this.IEVersion(),limit:7>=this.IEVersion()>10,navTop:n("#aboutMe").offset().top-60}},IEVersion:function(){var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,n=e.indexOf("Windows NT 6.1; Trident/7.0;")>-1&&!t;if(t){new RegExp("MSIE (\\d+\\.\\d+);").test(e);var o=parseFloat(RegExp.$1);return 7==o?"7":8==o?"8":9==o?"9":10==o?"10":11==o?"11":"0"}return n?"Edge":"-1"},htmlEncodeByRegExp:function(e){var t="";return 0==e.length?"":(t=e.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/ /g,"&nbsp;"),t=t.replace(/\'/g,"&#39;"),t=t.replace(/\"/g,"&quot;"))}},n.extend({init:function(){o(),r(),"pc"==e.utils.getWindowInfo().userAgent&&(d(),I.init()),i()},goTop:function(e){if(e){var t=n(e).offset().top-60;n("body,html").stop(!0,!0).animate({scrollTop:t},300)}else n("body,html").stop(!0,!0).animate({scrollTop:0},300)},demo:function(t){var o=n(t).attr("data-type");x=new Swiper("#portfolioBanner .swiper-container",{paginationType:"fraction",nextButton:"#portfolioBanner .swiper-button-next",prevButton:"#portfolioBanner .swiper-button-prev",onSlideChangeEnd:function(e){x.update()}});for(var s=0;s<T.length;s++)if(o==T[s].name)for(var i=0;i<T[s].imgUrl.length;i++)x.appendSlide('<div class="swiper-slide"><img src='+T[s].imgUrl[i]+"></div>");n("#portfolioBanner").show("400",function(){x.update(),"m"==e.utils.getWindowInfo().userAgent&&ModalHelper.afterOpen()})},closeModal:function(t){n(t).parent().fadeOut("400",function(){x.removeAllSlides(),x.updatePagination(),"m"==e.utils.getWindowInfo().userAgent&&ModalHelper.beforeClose()})},getMessage:function(){n.ajax({type:"get",url:y+"getMessage",data:"",beforeSend:function(){},success:function(e){var t=JSON.parse(e);if(1==t.s)for(var o=t.info,s=0;s<o.length;s++){var i="<li>";0==o[s].sex?i+="<div class='img-box'><img src='https://images.hongzequan.com/website/b_gg.png'></div>":i+="<div class='img-box'><img src='https://images.hongzequan.com/website/b_mm.png'></div>",i+="<div class='font-box'>",0==o[s].isAdmin?i+="<div class='from'>来自"+o[s].address+"网友 - "+o[s].userName+"</div>":i+="<div class='from'>来自 - 权小哥</div>",i+="<p>"+o[s].content+"</p>",i+="<span>"+f(o[s].createDate)+"</span>",h&&(i+="<div class='delect' onClick='$.delectMessage("+o[s].id+",this)'>删除</div>"),i+="</div>",i+="</li>",n(".msg-item").append(i)}},error:function(e){console.log("err")}})},submitMessage:function(){var t={username:""==n("#username").val()?"匿名":e.utils.htmlEncodeByRegExp(n("#username").val()),sex:n('input:radio[name="sex"]:checked').val(),content:e.utils.htmlEncodeByRegExp(n("textarea[name='content']").val()),ip:n("#ip").val(),address:n("#address").val(),isAdmin:h?1:0};n.ajax({type:"POST",url:y+"setMessage",data:t,beforeSend:function(){if(""==t.content)return n.openMessage("error","内容不能为空"),!1},success:function(e){if(1==JSON.parse(e).s){n.openMessage("success","提交成功～"),n("textarea[name='content']").val("");var o="<li class='on'>";o+=0==t.sex?"<div class='img-box'><img src='https://images.hongzequan.com/website/b_gg.png'></div>":"<div class='img-box'><img src='https://images.hongzequan.com/website/b_mm.png'></div>",o+="<div class='font-box'>",o+=0==t.isAdmin?"<div class='from'>来自"+t.address+"网友 - "+t.username+"</div>":"<div class='from'>来自 - 权小哥</div>",o+="<p>"+t.content+"</p>",o+="<span>"+f(Date.parse(new Date))+"</span>",o+="</div>",o+="</li>",n(".msg-item").prepend(o)}},error:function(e){console.log(e),n.openMessage("error","提交失败！")}})},checkMessage:function(){var e={ip:n("#ip").val()};n.ajax({type:"POST",url:y+"checkMessage",data:e,beforeSend:function(){},success:function(e){var t=JSON.parse(e);1==t.s?n.submitMessage():0==t.s&&n.openMessage("error","1分钟内禁止多次提交")},error:function(e){console.log(e),n.openMessage("error","提交失败！")}})},delectMessage:function(e,t){n.ajax({type:"POST",url:y+"delectMessage",data:{id:e},beforeSend:function(){},success:function(e){1==JSON.parse(e).s&&(n.openMessage("success","删除成功"),n(t).parents("li").fadeOut("400",function(){n(t).parents("li").remove()}))},error:function(e){console.log(e),n.openMessage("error","提交失败！")}})},openMessage:function(e,t){if(n("#tips").length>0&&(n("#tips").remove(),"undefined"!=v&&clearTimeout(v)),"success"==e){var o='<div id="tips">'+t+"</div>";n("body").append(o)}else if("error"==e){var o='<div id="tips" class="error">'+t+"</div>";n("body").append(o)}n("#tips").addClass("on"),v=setTimeout(function(){n("#tips").fadeOut("400",function(){n("#tips").remove()})},3e3)}}),n(".ui-checkbox li").on("click",function(){n(this).find("input").attr("checked","checked"),n(this).siblings().find("input").removeAttr("checked")}),n(e).scroll(function(t){var o=n(e).scrollTop();o>=e.utils.getWindowInfo().navTop?(n("#header").addClass("on"),"m"==e.utils.getWindowInfo().userAgent&&n(".copyRight .goTop").addClass("on")):(n("#header").removeClass("on"),"m"==e.utils.getWindowInfo().userAgent&&n(".copyRight .goTop").removeClass("on")),o>=n("#mySkills .font-box").offset().top-e.utils.getWindowInfo().height/2&&u(),p(o)});var I=new SMT({animateClass:"animated",offset:100});e.onload=function(){m()},n(e).resize(function(){m()})}(window,document,$),function(e){function t(t){this.opt=this.extend({dom:"J_dotLine",cw:1e3,ch:500,ds:100,r:.5,cl:"#000",dis:100},t),this.c=document.getElementById(this.opt.dom),this.ctx=this.c.getContext("2d"),this.c.width=this.opt.cw,this.c.height=this.opt.ch,this.dotSum=this.opt.ds,this.radius=this.opt.r,this.disMax=this.opt.dis*this.opt.dis,this.color=this.color2rgb(this.opt.cl),this.dots=[];var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},o=this,s={x:null,y:null,label:"mouse"};this.c.onmousemove=function(t){var t=t||e.event;s.x=t.clientX-o.c.offsetLeft,s.y=t.clientY-o.c.offsetTop},this.c.onmouseout=function(e){s.x=null,s.y=null},this.animate=function(){o.ctx.clearRect(0,0,o.c.width,o.c.height),o.drawLine([s].concat(o.dots)),n(o.animate)}}t.prototype.extend=function(e,t){for(var n in t)t[n]&&(e[n]=t[n]);return e},t.prototype.color2rgb=function(e){var t=null,n=null,o=null,s=e.toLowerCase(),i=/^#[0-9a-fA-F]{3,6}$/;if(s&&i.test(s)){if(4==s.length){for(var a="#",r=1;r<4;r++)a+=s.slice(r,r+1).concat(s.slice(r,r+1));s=a}t=parseInt("0x"+s.slice(1,3)),n=parseInt("0x"+s.slice(3,5)),o=parseInt("0x"+s.slice(5,7))}return t+","+n+","+o},t.prototype.addDots=function(){for(var e,t=0;t<this.dotSum;t++)e={x:Math.floor(Math.random()*this.c.width)-this.radius,y:Math.floor(Math.random()*this.c.height)-this.radius,ax:(2*Math.random()-1)/1.5,ay:(2*Math.random()-1)/1.5},this.dots.push(e)},t.prototype.move=function(e){e.x+=e.ax,e.y+=e.ay,e.ax*=e.x>this.c.width-this.radius||e.x<this.radius?-1:1,e.ay*=e.y>this.c.height-this.radius||e.y<this.radius?-1:1,this.ctx.beginPath(),this.ctx.arc(e.x,e.y,this.radius,0,2*Math.PI,!0),this.ctx.stroke()},t.prototype.drawLine=function(e){var t,n=this;this.dots.forEach(function(o){n.move(o);for(var s=0;s<e.length;s++)if((t=e[s])!==o&&null!==t.x&&null!==t.y){var i=o.x-t.x,a=o.y-t.y,r=i*i+a*a;if(!(Math.sqrt(r)>Math.sqrt(n.disMax))){t.label&&Math.sqrt(r)>Math.sqrt(n.disMax)/2&&(o.x-=.02*i,o.y-=.02*a);var c;c=(n.disMax-r)/n.disMax,n.ctx.beginPath(),n.ctx.lineWidth=c/2,n.ctx.strokeStyle="rgba("+n.color+","+parseFloat(c+.2).toFixed(1)+")",n.ctx.moveTo(o.x,o.y),n.ctx.lineTo(t.x,t.y),n.ctx.stroke()}}})},t.prototype.start=function(){var e=this;this.addDots(),setTimeout(function(){e.animate()},100)},e.Dotline=t}(window);var list=["学而时习之","不亦说乎","有朋自远方来","不亦乐乎","人不知而不愠","不亦君子乎","三人行 必有我师焉","择其善者而从之","其不善者而改之","学而不思则罔","思而不学则殆"];$("body>*").bind("click",function(e){textUp(e,2e3,list,200)});var ModalHelper=function(e){var t;return{afterOpen:function(){t=document.scrollingElement.scrollTop,document.body.classList.add("no-scroll"),document.body.style.top=-t+"px"},beforeClose:function(){document.body.classList.remove("no-scroll"),document.scrollingElement.scrollTop=t}}}();$.init();